<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="sale_packing_list_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <page >
                    <style>
                        .noborders {
                        border: 0;
                        }
                        .page-break {
                            page-break-after: always !important;
                        }

                        <!--.table-bordered > tbody > tr > td,.table-bordered > tbody > tr > th {-->
                        <!--border: 1px solid #000;-->
                        <!--}-->
                    </style>
                    <div class="oe_structure"></div>
                    <div class="row">
                        <center>
                            <b>
                                <h2>Surgical Product Solutions</h2>
                                <h4>Packing List</h4>
                            </b>
                        </center>

                    </div>
                    <br/>
                    <t class="row"  t-foreach="packing_list_result" t-as="packing_list">
                        <t t-set="i" t-value="0"></t>
                        <t t-set='trackin_info' t-value="False"></t>
                        <t t-if="packing_list.carrier_tracking_ref"> <!-- This means, if there are some value at this call -->
                            <t t-if="',' in packing_list.carrier_tracking_ref" >
                                <t t-set='trackin_info' t-value="packing_list.carrier_tracking_ref.split(',')"></t>
                            </t>
                        </t>
                        <div class="col-md-12" >
                            <table class="table  table-condensed table-bordered " >
                                <thead>

                                </thead>
                                <tbody class="invoice_tbody" >
                                    <tr  style="border: 1px solid #ddd;">
                                       <th>
                                            Ship To:
                                            <div class="col-md-12" style="margin-top:10px;border: 1px solid #ddd;width:100%">
                                                <p style="font-weight: lighter">
                                                    <span t-esc="packing_list.partner_id.display_name"> </span> <br/>
                                                   <span t-esc="packing_list.sale_id.partner_shipping_id.street"> </span>
                                                    <br/>
                                                    <t t-if="packing_list.sale_id.partner_shipping_id.street2">
                                                        <span t-esc="packing_list.sale_id.partner_shipping_id.street2"> </span>
                                                    <br/>
                                                    </t>

                                                    <span t-esc="packing_list.sale_id.partner_shipping_id.city"> </span>
                                                    <span t-esc="packing_list.sale_id.partner_shipping_id.state_id.name"> </span>
                                                    <span t-esc="packing_list.sale_id.partner_shipping_id.zip"> </span>
                                                    <br/>
                                                     <span t-esc="packing_list.sale_id.partner_shipping_id.country_id.name"> </span>
                                                    <br/>

                                                </p>
                                                 <t t-if="packing_list.sale_id.client_order_ref">
                                                     <p style="margin-top:10px;font-weight: lighter">
                                                         PO Number: <span t-esc="packing_list.sale_id.client_order_ref"> </span>
                                                     </p>
                                                 </t>
                                            </div>
                                        </th>
                                        <th>
                                            Bill To:
                                            <div class="col-md-12" style="margin-top:10px;border: 1px solid #ddd;width:100%">
                                                <p style="font-weight: lighter">
                                                    <span t-esc="packing_list.partner_id.display_name"> </span><br/>
                                                   <span t-esc="packing_list.sale_id.partner_invoice_id.street"></span>
                                                    <br/>
                                                    <t t-if="packing_list.sale_id.partner_invoice_id.street2">
                                                        <span t-esc="packing_list.sale_id.partner_invoice_id.street2"></span>
                                                    <br/>
                                                    </t>

                                                    <span t-esc="packing_list.sale_id.partner_invoice_id.city"> </span>
                                                    <span t-esc="packing_list.sale_id.partner_invoice_id.state_id.name"> </span>
                                                    <span t-esc="packing_list.sale_id.partner_invoice_id.zip"> </span>
                                                    <br/>
                                                     <span t-esc="packing_list.sale_id.partner_invoice_id.country_id.name"></span>
                                                    <br/>

                                                </p>
                                            </div>
                                        </th>
                                    </tr>
                                    <tr>
                                         <td colspan="2">
                                             <table class="table  table-condensed table-bordered " >
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            <div class="col-md-12">Package Count</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Req. Ship Date</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Shipping Terms</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Ship Via</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Order Num</div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody class="invoice_tbody"  >
                                                    <tr >
                                                       <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-esc="len(packing_list.package_ids)"></span>
                                                                </p>
                                                            </div>
                                                       </td>
                                                       <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-esc="packing_list.sale_id.requested_date"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                         <span t-esc="packing_list.shipping_terms"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-esc="packing_list.carrier_id.name"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-esc="packing_list.origin"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                             </table>
                                         </td>

                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <div class="col-md-12" style="margin-top:10px;width:50%">
                                                <p style="height:10px;font-size: larger;font-weight: bold;">

                                                    Package Information:
                                                </p>
                                                <p>
                                                    <hr style="margin:0px;padding:0px"></hr>
                                                     <t t-if="packing_list.package_ids">
                                                         <t t-foreach="packing_list.package_ids" t-as="packing">
                                                              <br/>
                                                              <span t-esc="packing.name"></span>
                                                                (#
                                                                 <t t-if="trackin_info">
                                                                   <span t-esc="trackin_info[packing_index]"> </span>
                                                                 </t>
                                                                 )
                                                         </t>
                                                    </t>
                                                    <a style="float:right" t-att-href="packing_list.carrier_tracking_url" target="_blank">
                                                        <t t-if="packing_list.carrier_id.name !='Normal Delivery Charges' ">
                                                         <span t-esc="packing_list.carrier_id.name"></span>
                                                       </t>
                                                    </a>
                                                    <hr style="margin:0px;padding:0px"></hr>
                                                </p>
                                            </div>
                                        </td>

                                    </tr>
                                    <tr>
                                      <td colspan="2">
                                          <table class="table  table-condensed table-bordered " style="margin-top:20px">
                                                <thead>

                                                </thead>
                                                <tbody class="invoice_tbody"  >
                                                    <tr>
                                                        <th>
                                                             <div class="col-md-12">#Line</div>
                                                        </th>
                                                        <th style ="width:60%;">
                                                            <div  class="col-md-12">Item/Description</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Qty Ordered</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Qty Shipped</div>
                                                        </th>
                                                        <th>
                                                            <div class="col-md-12">Qty Remaining</div>
                                                        </th>
                                                    </tr>
                                                    <tr t-foreach="packing_list.move_lines" t-as="move_line">
                                                       <td>
                                                            <span t-esc="move_line_index + 1" ></span>
                                                        </td>
                                                         <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    Code#<span t-esc="move_line.product_tmpl_id.sku_code">  </span> -
                                                                    <span t-esc="move_line.product_tmpl_id.name"> </span>
                                                                </p>
                                                                 <p style="font-weight: lighter" t-foreach="move_line.move_line_ids" t-as="move_line_id">
                                                                    <span t-esc="move_line_id.qty_done"></span>
                                                                    <span t-esc="move_line.product_uom.name"></span>-
                                                                    Lot#:<span t-esc="move_line_id.lot_id.name"></span>
                                                                    <br/>
                                                                    Exp Date:<span t-esc="move_line_id.lot_id.use_date"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                       <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-field="move_line.ordered_qty"></span>
                                                                    <span t-esc="move_line.product_uom.name"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-field="move_line.quantity_done"></span>
                                                                    <span t-esc="move_line.product_uom.name"></span>
                                                                </p>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12" style="margin-top:10px">
                                                                <p style="font-weight: lighter">
                                                                    <span t-esc="round(move_line.remaining_qty)"></span>
                                                                    <span t-esc="move_line.product_uom.name"></span>
                                                                </p>

                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                      </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="page-break"></div>
                    </t>
                </page>
            </t>
        </t>
    </template>
</odoo>
